<body>
    <!-- Icons Grid -->
    <section class="features-icons text-center">
        <div class="container">
            <div class="form-group row">
                <h4 style="color: #343a40!important;">Hey, its a doodle recognizer!</h4>&nbsp;&nbsp;&nbsp;
                <a data-toggle="collapse" data-target="#demo" href="#" style="margin-top: 5px;">... more </a>
            </div>
            <div id="demo" class="collapse" style="text-align: start">
                <p>
                    This is an doodle recognizing app inspired by and based on <a href=https://quickdraw.withgoogle.com" target="_blank">Google Quick Draw</a> and its graciously provided <a href="https://quickdraw.withgoogle.com/data">open data set</a>.
                    It is built using Microsoft's <a href="https://www.customvision.ai/" target="_blank">Custom Vision AI Service</a>.
                    The custom vision service is part of a larger family of AI cloud services in Azure called <a href="https://docs.microsoft.com/en-us/azure/cognitive-services/">Cognitive Services</a>.
                    When I saw what was being done with Google Quick Draw, I thought it would be great opportunity to train a custom vision model using the open data set of doodles.  This is a quick demo, so the trained model
                    uses only a small number of images to start.  By using this site, you help train the model by submitting your image to be analyzed anonymously.
                </p>
            </div>
            <div class="row">
                <div class="col-lg-3">
                    <div class="features-icons-item mx-auto mb-5 mb-lg-0 mb-lg-3">
                        <div class="features-icons-icon d-flex">
                            <i class="icon-mouse m-auto text-primary"></i>
                        </div>
                        <h4>1. Start with this object</h4>

                        <h2 class="nextThingToDraw" style="color:coral;"></h2>
                        <br />
                        <button class="btn btn-success" type="button" id="getImageButton">Get the next thing to draw!</button>
                        <br /> <br />
                        <p class="mb-0" style="text-align: start">Click start to get an image to draw. Then Draw it in the canvas area. Cick 'Predict' to see if the AI can recognize what you're drawing. The draw area supports touchscreen and mouse</p>
                    </div>
                </div>
                <div class="col-lg-6">
                    <div class="features-icons-item mx-auto mb-5 mb-lg-0 mb-lg-3">
                        <div class="features-icons-icon d-flex">
                            <i class="icon-note m-auto text-primary"></i>
                        </div>
                        <h4>2. Draw It</h4>
                        <canvas id="sketchpad" height="300" width="400" style="margin-bottom: 10px;">
                        </canvas>
                        <button class="btn btn-secondary offset-sm-6" type="button" id="clearbutton" style="color: dodgerblue"
                                onclick="clearCanvas(canvas,ctx);">
                            Clear Drawing Area
                        </button>
                    </div>
                </div>
                <div class="col-lg-3">
                    <div class="features-icons-item mx-auto mb-0 mb-lg-3">
                        <div class="features-icons-icon d-flex">
                            <i class="icon-chemistry m-auto text-primary"></i>
                        </div>
                        <h4>3: Prediction:</h4>

                        <p class=" mb-0" style="text-align: start">Click the button to see if the Artificial Intelligence recognizes your drawing</p>
                        <br />
                        <button class="btn btn-success" type="button" id="predictButton" style="margin-bottom: 3px;">Predict!</button>
                    </div>
                </div>
            </div>
        </div>
    </section>
    <!-- Footer -->
    <hr />
    <footer class="footer">
        <div class="container">
            <div class="row">
                <div class="col-lg-6 h-100 text-center text-lg-left my-auto">
                    <ul class="list-inline mb-2">
                        <li class="list-inline-item">
                            <a href="#">About</a>
                        </li>
                        <li class="list-inline-item">&sdot;</li>
                        <li class="list-inline-item">
                            <a href="#">Contact</a>
                        </li>
                        <li class="list-inline-item">&sdot;</li>
                        <li class="list-inline-item">
                            <a href="#">Terms of Use</a>
                        </li>
                        <li class="list-inline-item">&sdot;</li>
                        <li class="list-inline-item">
                            <a href="#">Privacy Policy</a>
                        </li>
                    </ul>
                    <p class="text-muted small mb-4 mb-lg-0">&copy; Your Website 2019. All Rights Reserved.</p>
                </div>
                <div class="col-lg-6 h-100 text-center text-lg-right my-auto">
                    <ul class="list-inline mb-0">
                        <li class="list-inline-item mr-3">
                            <a href="#">
                                <i class="fab fa-facebook fa-2x fa-fw"></i>
                            </a>
                        </li>
                        <li class="list-inline-item mr-3">
                            <a href="#">
                                <i class="fab fa-twitter-square fa-2x fa-fw"></i>
                            </a>
                        </li>
                        <li class="list-inline-item">
                            <a href="#">
                                <i class="fab fa-instagram fa-2x fa-fw"></i>
                            </a>
                        </li>
                    </ul>
                </div>
            </div>
        </div>
    </footer>
</body>
<link href="https://cdnjs.cloudflare.com/ajax/libs/toastr.js/latest/toastr.min.css" rel="stylesheet" type="text/css">
<script src="https://cdnjs.cloudflare.com/ajax/libs/toastr.js/latest/toastr.min.js"></script>

<style>
    /*animation*/
    @@keyframes bounceIn {
        0% {
            transform: scale(0.1);
            opacity: 0;
        }

        60% {
            transform: scale(1.2);
            opacity: 1;
        }

        100% {
            transform: scale(1);
        }
    }

    .nextThingToDraw {
        animation-duration: 2s;
        animation-name: bounceIn;
    }

    /* Some CSS styling */
    #sketchpadapp {
        /* Prevent nearby text being highlighted when accidentally dragging mouse outside confines of the canvas */
        -webkit-touch-callout: none;
        -webkit-user-select: none;
        -khtml-user-select: none;
        -moz-user-select: none;
        -ms-user-select: none;
        user-select: none;
    }

    #sketchpad {
        float: left;
        height: 300px;
        width: 400px;
        border: 2px solid #888;
        border-radius: 4px;
        position: relative; /* Necessary for correct mouse co-ords in Firefox */
        margin-left: -30px;
    }

    #clearbutton {
        font-size: 15px;
        padding: 10px;
        -webkit-appearance: none;
        background: #eee;
        border: 1px solid #888;
    }
</style>
@*This draw implementation comes from a great article found here
    https://zipso.net/a-simple-touchscreen-sketchpad-using-javascript-and-html5/*@
<script type="text/javascript">
    // Variables for referencing the canvas and 2dcanvas context
    var canvas, ctx, penSize, words, thisWordIndex;

    $(document).ready(function () {
        words = ['Alarm Clock', 'Airplane'];
        thisWordIndex = 0;
        $('.nextThingToDraw').html(words[0]);
        penSize = 5;
        init();
    });

    $(".more").toggle(function () {
        $(this).text("less..").siblings(".complete").show();
    }, function () {
        $(this).text("more..").siblings(".complete").hide();
    });

    $("#getImageButton").click(function () {
        thisWordIndex++;
        //Proceed through the words to draw.  Start over when you reach the end
        if (thisWordIndex > 1) {
            thisWordIndex = 0;
        }
        $('.nextThingToDraw').html(words[thisWordIndex]);

        //clone the element (re-triggers the animation)
        var el = $('.nextThingToDraw'),
            newone = el.clone(true);
        //insert it before the existing element
        el.before(newone);
        //remove the original element by finding it in relation to the clone
        $("." + el.attr("class") + ":last").remove();

    });

    // Variables to keep track of the mouse position and left-button status
    var mouseX, mouseY, mouseDown = 0;

    // Variables to keep track of the touch position
    var touchX, touchY;

    // Keep track of the old/last position when drawing a line
    // We set it to -1 at the start to indicate that we don't have a good value for it yet
    var lastX, lastY = -1;

    // Draws a line between the specified position on the supplied canvas name
    // Parameters are: A canvas context, the x position, the y position, the size of the dot
    function drawLine(ctx, x, y, size) {

        // If lastX is not set, set lastX and lastY to the current position
        if (lastX == -1) {
            lastX = x;
            lastY = y;
        }

        // Let's use black by setting RGB values to 0, and 255 alpha (completely opaque)
        r = 0; g = 0; b = 0; a = 255;

        // Select a fill style
        ctx.strokeStyle = "rgba(" + r + "," + g + "," + b + "," + (a / 255) + ")";

        // Set the line "cap" style to round, so lines at different angles can join into each other
        ctx.lineCap = "round";
        //ctx.lineJoin = "round";

        // Draw a filled line
        ctx.beginPath();

        // First, move to the old (previous) position
        ctx.moveTo(lastX, lastY);

        // Now draw a line to the current touch/pointer position
        ctx.lineTo(x, y);

        // Set the line thickness and draw the line
        ctx.lineWidth = size;
        ctx.stroke();

        ctx.closePath();

        // Update the last position to reference the current position
        lastX = x;
        lastY = y;
    }

    // Clear the canvas context using the canvas width and height
    function clearCanvas(canvas, ctx) {
        ctx.clearRect(0, 0, canvas.width, canvas.height);
    }

    // Keep track of the mouse button being pressed and draw a dot at current location
    function sketchpad_mouseDown() {
        mouseDown = 1;
        drawLine(ctx, mouseX, mouseY, penSize);
    }

    // Keep track of the mouse button being released
    function sketchpad_mouseUp() {
        mouseDown = 0;

        // Reset lastX and lastY to -1 to indicate that they are now invalid, since we have lifted the "pen"
        lastX = -1;
        lastY = -1;
    }

    // Keep track of the mouse position and draw a dot if mouse button is currently pressed
    function sketchpad_mouseMove(e) {
        // Update the mouse co-ordinates when moved
        getMousePos(e);

        // Draw a dot if the mouse button is currently being pressed
        if (mouseDown == 1) {
            drawLine(ctx, mouseX, mouseY, penSize);
        }
    }

    // Get the current mouse position relative to the top-left of the canvas
    function getMousePos(e) {
        if (!e)
            var e = event;

        if (e.offsetX) {
            mouseX = e.offsetX;
            mouseY = e.offsetY;
        }
        else if (e.layerX) {
            mouseX = e.layerX;
            mouseY = e.layerY;
        }
    }

    // Draw something when a touch start is detected
    function sketchpad_touchStart() {
        // Update the touch co-ordinates
        getTouchPos();

        drawLine(ctx, touchX, touchY, penSize);

        // Prevents an additional mousedown event being triggered
        event.preventDefault();
    }

    function sketchpad_touchEnd() {
        // Reset lastX and lastY to -1 to indicate that they are now invalid, since we have lifted the "pen"
        lastX = -1;
        lastY = -1;
    }

    // Draw something and prevent the default scrolling when touch movement is detected
    function sketchpad_touchMove(e) {
        // Update the touch co-ordinates
        getTouchPos(e);

        // During a touchmove event, unlike a mousemove event, we don't need to check if the touch is engaged, since there will always be contact with the screen by definition.
        drawLine(ctx, touchX, touchY, penSize);

        // Prevent a scrolling action as a result of this touchmove triggering.
        event.preventDefault();
    }

    // Get the touch position relative to the top-left of the canvas
    // When we get the raw values of pageX and pageY below, they take into account the scrolling on the page
    // but not the position relative to our target div. We'll adjust them using "target.offsetLeft" and
    // "target.offsetTop" to get the correct values in relation to the top left of the canvas.
    function getTouchPos(e) {
        if (!e)
            var e = event;

        if (e.touches) {
            if (e.touches.length == 1) { // Only deal with one finger
                var touch = e.touches[0]; // Get the information for finger #1
                touchX = touch.pageX - touch.target.offsetLeft;
                touchY = touch.pageY - touch.target.offsetTop;
            }
        }
    }

    // Set-up the canvas and add our event handlers after the page has loaded
    function init() {
        // Get the specific canvas element from the HTML document
        canvas = document.getElementById('sketchpad');

        // If the browser supports the canvas tag, get the 2d drawing context for this canvas
        if (canvas.getContext)
            ctx = canvas.getContext('2d');

        // Check that we have a valid context to draw on/with before adding event handlers
        if (ctx) {
            // React to mouse events on the canvas, and mouseup on the entire document
            canvas.addEventListener('mousedown', sketchpad_mouseDown, false);
            canvas.addEventListener('mousemove', sketchpad_mouseMove, false);
            window.addEventListener('mouseup', sketchpad_mouseUp, false);

            // React to touch events on the canvas
            canvas.addEventListener('touchstart', sketchpad_touchStart, false);
            canvas.addEventListener('touchend', sketchpad_touchEnd, false);
            canvas.addEventListener('touchmove', sketchpad_touchMove, false);
        }
    }
</script>